<!doctype html>
<html lang="en">

<head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

	
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Title Of Site -->
	<title>Reserve Table</title>
	<meta name="description" content="HTML Responsive Template for Restaurant Finder Based on Twitter Bootstrap 3.x.x" />
	<meta name="keywords" content="restaurant, dinner, lunch, eat, food, rice, dine, menu, dining, meal, cafe, breakfast" />
	<meta name="author" content="crenoveative">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	
	<!-- Fav and Touch Icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/ico/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57-precomposed.png">
	<link rel="shortcut icon" href="images/ico/favicon.png">

	<!-- CSS Plugins -->
	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css" media="screen">	
	<link href="css/animate.css" rel="stylesheet">
	<link href="css/main.css" rel="stylesheet">
	<link href="css/component.css" rel="stylesheet">

	<!-- CSS Custom -->
	<link href="css/style.css" rel="stylesheet">
	
	<!-- For your own style -->
	<link href="css/your-style.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	
	
    <style>
      #map {
        height: 350px;
      }
    </style>	
    
 <script type="text/javascript">
 	function focusInput(){
		document.getElementById("pac-input").focus();
	}
 </script>
    
	
</head>

<body class="full-width-container transparent-header" onload="focusInput()">
				    
				    
				    

	<div id="introLoader" class="introLoading"></div>
	
	<!-- start Container Wrapper -->
	<div class="container-wrapper">

		
		<!-- start Main Wrapper -->
		<div class="main-wrapper scrollspy-container">
		
			<!-- start hero-header -->
			<div class="hero text-center alt-height" style="background-image:url('images/hero-header/01.jpg');">
			        
			       
				    
				    
				<div class="container">

					<div class="row">
					
						<div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
						
							<h1>Find the Zaitoon nearest to You</h1>
							<p>Choose a convenient and nearest outlet and make an advance reservation today.</p>
							
							<div class="home-search-form home-search-form-center">
							
								<form>
								
									<div class="form-group location-form" style="width: 100%">
										<input type="text" id="pac-input" class="form-control locationIn" style="background: none; border: none; border-bottom: 3px solid #FFF; color: #FFF;" placeholder="Type in your current location or area?">
									</div>		
									
									<div class="form-group">
										<select class="custom-select" id="cuisine-type">
											<option value="0">Radius</option>
											<option value="10">With in 10 Kms</option>
											<option value="30">With in 30 Kms</option>
											<option value="50">With in 50 Kms</option>
											<option value="100">With in 100 Kms</option>
										</select>
									</div>
									
																								
								
								</form>
								
								<div class="clear"></div>
								
								
							</div>
						
						</div>
						
					</div>

				</div>
				
			</div>
			<!-- end hero-header -->

			<section id="outletSuggetions">
			
				<div class="container">

					<div class="row">
					
						<div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
						
							<div class="section-title-02 text-center">

								<h3><span>Your Nearest Zaitoon</span></h3>
							
								<p>Mist is highly flexible, and will be able to adjust to any of your customizationâ€™s. Get your projects to a new level. Included is animation on view, Parallax block, counters and charts, high resolution graphics etc.</p>
							
							</div>
						
						</div>
						
					</div>

					<div class="destination-grid-wrapper-02">
					
						<div class="GridLex-gap-30 GridLex-gap-20-mdd GridLex-gap-10-xs">
						
							<div class="GridLex-grid-noGutter-equalHeight GridLex-grid-center">
							
								<div class="GridLex-col-3_sm-6_xs-6_xss-12">
								
									<div class="destination-grid-item-02">
										<a href="#">
											<div class="image">
												<img src="images/hot-item/01.jpg" alt="Hot Item">
											</div>
											<div class="content">
												<h4><span>Bangkok</span></h4>
												<span>435 restaurants</span>
											</div>
										</a>
									</div>
								
								</div>
								
								<div class="GridLex-col-3_sm-6_xs-6_xss-12">
								
									<div class="destination-grid-item-02">
										<a href="#">
											<div class="image">
												<img src="images/hot-item/02.jpg" alt="Hot Item">
											</div>
											<div class="content">
												<h4><span>Kuala Lumpur</span></h4>
												<span>188 restaurants</span>
											</div>
										</a>
									</div>
								
								</div>
								
								<div class="GridLex-col-3_sm-6_xs-6_xss-12">
								
									<div class="destination-grid-item-02">
										<a href="#">
											<div class="image">
												<img src="images/hot-item/03.jpg" alt="Hot Item">
											</div>
											<div class="content">
												<h4><span>Pattaya</span></h4>
												<span>125 restaurants</span>
											</div>
										</a>
									</div>
								
								</div>
								<div class="GridLex-col-3_sm-6_xs-6_xss-12">
								
									<div class="destination-grid-item-02">
										<a href="#">
											<div class="image">
												<img src="images/hot-item/03.jpg" alt="Hot Item">
											</div>
											<div class="content">
												<h4><span>Pattaya</span></h4>
												<span>125 restaurants</span>
											</div>
										</a>
									</div>
								
								</div>								

							</div>
							
						</div>
						
					</div>
					
										

				</div>
				
								
			</section>
			
			
		</div>
		
		<!-- end Main Wrapper -->
		
		                        <!-- SNACKBAR - TOAST -->
                              		<div id="snackbar"></div>
	
		
	</div> 	
	<!-- end Container Wrapper -->
	
	<div>
		<div id="map"></div>
 	</div>
<!-- start Back To Top -->
<div id="back-to-top">
   <a href="#"><i class="fa fa-chevron-up"></i></a>
</div>
<!-- end Back To Top -->

<div id="ajaxLoginModal" class="modal fade login-box-wrapper" data-width="500" data-backdrop="static" data-keyboard="false" tabindex="-1" style="display: none;"></div>
		
<div id="ajaxRegisterModal" class="modal fade login-box-wrapper" data-width="500" data-backdrop="static" data-keyboard="false" tabindex="-1" style="display: none;">
</div>

<div id="ajaxForgotPasswordModal" class="modal fade login-box-wrapper" data-width="500" data-backdrop="static" data-keyboard="false" tabindex="-1" style="display: none;"> </div>

 
<!-- JS -->
<script type="text/javascript" src="js/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="js/jquery-migrate-1.4.1.min.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/SmoothScroll.min.js"></script>
<script type="text/javascript" src="js/jquery.waypoints.min.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/jquery.slicknav.min.js"></script>
<script type="text/javascript" src="js/spin.min.js"></script>
<script type="text/javascript" src="js/jquery.introLoader.min.js"></script>
<script type="text/javascript" src="js/fancySelect.js"></script>
<script type="text/javascript" src="js/bootstrap-rating.js"></script> 
<script type="text/javascript" src="js/select2.full.js"></script>
<script type="text/javascript" src="js/slick.min.js"></script>
<script type="text/javascript" src="js/jquery.placeholder.min.js"></script>
<script type="text/javascript" src="js/ion.rangeSlider.min.js"></script>
<script type="text/javascript" src="js/readmore.min.js"></script>
<script type="text/javascript" src="js/bootstrap-modalmanager.js"></script>
<script type="text/javascript" src="js/bootstrap-modal.js"></script>
<script type="text/javascript" src="js/instagram.min.js"></script>
<script type="text/javascript" src="js/customs.js"></script>
    
<script>

var map;
var markers = [];
var infoWindow;
var locationSelect;
var manMarker;



function initMap() {

    map = new google.maps.Map(document.getElementById('map'), {
        center: {
            lat: 13.0826802,
            lng: 80.2707184
        },
        zoom: 13
    });
    //var card = document.getElementById('pac-card');
    var input = document.getElementById('pac-input');


    infoWindow = new google.maps.InfoWindow();

    //map.controls[google.maps.ControlPosition.TOP_RIGHT].push(card);

    var autocomplete = new google.maps.places.Autocomplete(input);

    autocomplete.setComponentRestrictions({
        'country': ['in']
    }); //Only in India
    autocomplete.bindTo('bounds', map);




    autocomplete.addListener('place_changed', function() {

        infoWindow.close();
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(null);
        }
        markers.length = 0;

        manMarker = new google.maps.Marker({
            map: map,
            anchorPoint: new google.maps.Point(0, -29),
            animation: google.maps.Animation.BOUNCE,
            icon: "https://zaitoon.online/icons/person_marker.png"
        });

        manMarker.setVisible(false);
        var place = autocomplete.getPlace();

        if (!place.geometry) {
            var x = document.getElementById("snackbar")
            x.innerHTML = "No location name " + place.name;
            x.className = "show";
            setTimeout(function() {
                x.className = x.className.replace("show", "");
            }, 5000);

            return;
        } 
        

        // If the place has a geometry, then present it on a map.
        if (place.geometry.viewport) {
            map.fitBounds(place.geometry.viewport);
        } else {
            map.setCenter(place.geometry.location);
            map.setZoom(17);
        }
        manMarker.setPosition(place.geometry.location);
        console.log(place.geometry.location.lat());
        console.log(place.geometry.location.lng());
        manMarker.setVisible(true);


        //Call show branches function.
        showOutlets(place.geometry.location);

    });



    function clearLocations() {
        infoWindow.close();
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(null);
        }
        markers.length = 0;
    }


    function showOutlets(center) {
        clearLocations();

        var radius = 10; //document.getElementById('radiusSelect').value;
        var searchUrl = 'https://accelerateengine.app/food-engine/apis/branchlocator.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
        downloadUrl(searchUrl, function(data) {
            var xml = parseXml(data);
            var markerNodes = xml.documentElement.getElementsByTagName("marker");
            var bounds = new google.maps.LatLngBounds();
            for (var i = 0; i < markerNodes.length; i++) {
                var id = markerNodes[i].getAttribute("id");
                var name = markerNodes[i].getAttribute("name");
                var address = markerNodes[i].getAttribute("address");
                var contact = markerNodes[i].getAttribute("contact");
                contact = (contact != null ? contact : 'care@zaitoon.online');
                var hours = markerNodes[i].getAttribute("operationalHours");
                hours = (hours != null ? hours : 'Not Available');
                var distance = parseFloat(markerNodes[i].getAttribute("distance"));
                var latlng = new google.maps.LatLng(
                    parseFloat(markerNodes[i].getAttribute("lat")),
                    parseFloat(markerNodes[i].getAttribute("lng")));

                createMarker(latlng, name, address, hours, contact, distance);
                bounds.extend(latlng);
            }

            var allMyMarkers = markers;
            allMyMarkers.push(manMarker);
            var count = 0;
            for (var i = 0; i < allMyMarkers.length; i++) {
                bounds.extend(allMyMarkers[i].getPosition());
                count++;
            }
            
            //No outlets found near to you
            if(count == 1){
	            var x = document.getElementById("snackbar")
	            x.innerHTML = "Sorry! There are no Zaitoon Outlet near to you.";
	            x.className = "show";
	            setTimeout(function() {
	                x.className = x.className.replace("show", "");
	            }, 3000);         
            }
            else{
	            var x = document.getElementById("snackbar")
	            x.innerHTML = "There are "+(count-1)+" Zaitoon outlets near to you.";
	            x.className = "show";
	            setTimeout(function() {
	                x.className = x.className.replace("show", "");
	            }, 3000);  
	                        
	            $('html, body').animate({
	                scrollTop: $("#outletSuggetions").offset().top
	            }, 1000);               
            }

            map.fitBounds(bounds);

        });
    }

    function createMarker(latlng, name, address, hours, contact, distance) {
        console.log('creating marker ' + name)
        var html = "<b style='color: #ed1c24'>Zaitoon " + name + "</b> <br/>" + address + "<br/>Open Hours: " + hours + "<br/> Contact " + contact + "<br/><tag style='color: #e67e22' >" + Math.round(distance * 100) / 100 + " km away</tag><br/><br/><button>Reserve Table</button>";
        var zaitoonMarker = new google.maps.Marker({
            map: map,
            position: latlng,
            animation: google.maps.Animation.DROP,
            icon: "https://zaitoon.online/icons/zaitoon_marker.png"
        });
        google.maps.event.addListener(zaitoonMarker, 'click', function() {
            infoWindow.setContent(html);
            infoWindow.open(map, zaitoonMarker);
        });
        markers.push(zaitoonMarker);
    }

    function downloadUrl(url, callback) {
        var request = window.ActiveXObject ?
            new ActiveXObject('Microsoft.XMLHTTP') :
            new XMLHttpRequest;

        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                request.onreadystatechange = doNothing;
                callback(request.responseText, request.status);
            }
        };

        request.open('GET', url, true);
        request.send(null);
    }

    function parseXml(str) {
        if (window.ActiveXObject) {
            var doc = new ActiveXObject('Microsoft.XMLDOM');
            doc.loadXML(str);
            return doc;
        } else if (window.DOMParser) {
            return (new DOMParser).parseFromString(str, 'text/xml');
        }
    }

    function doNothing() {}




}
   
</script>


    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBkXX66Q7pErKeFvuqbaNgEyHWBsGj0ncA&libraries=places&callback=initMap"
        async defer></script>
        
        
</body>


</html>